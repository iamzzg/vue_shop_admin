(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cate_params_goods_addpage"],{"06fc":function(t,e,r){},1276:function(t,e,r){"use strict";var a=r("d784"),n=r("44e7"),i=r("825a"),o=r("1d80"),s=r("4840"),c=r("8aa5"),l=r("50c4"),u=r("14c3"),d=r("9263"),p=r("d039"),m=[].push,f=Math.min,h=4294967295,g=!p((function(){return!RegExp(h,"y")}));a("split",2,(function(t,e,r){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var a=String(o(this)),i=void 0===r?h:r>>>0;if(0===i)return[];if(void 0===t)return[a];if(!n(t))return e.call(a,t,i);var s,c,l,u=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,g=new RegExp(t.source,p+"g");while(s=d.call(g,a)){if(c=g.lastIndex,c>f&&(u.push(a.slice(f,s.index)),s.length>1&&s.index<a.length&&m.apply(u,s.slice(1)),l=s[0].length,f=c,u.length>=i))break;g.lastIndex===s.index&&g.lastIndex++}return f===a.length?!l&&g.test("")||u.push(""):u.push(a.slice(f)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var n=o(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,n,r):a.call(String(n),e,r)},function(t,n){var o=r(a,t,this,n,a!==e);if(o.done)return o.value;var d=i(t),p=String(this),m=s(d,RegExp),b=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),y=new m(g?d:"^(?:"+d.source+")",v),_=void 0===n?h:n>>>0;if(0===_)return[];if(0===p.length)return null===u(y,p)?[p]:[];var x=0,w=0,k=[];while(w<p.length){y.lastIndex=g?w:0;var C,F=u(y,g?p:p.slice(w));if(null===F||(C=f(l(y.lastIndex+(g?0:w)),p.length))===x)w=c(p,w,b);else{if(k.push(p.slice(x,w)),k.length===_)return k;for(var L=1;L<=F.length-1;L++)if(k.push(F[L]),k.length===_)return k;w=x=C}}return k.push(p.slice(x)),k}]}),!g)},"14c3":function(t,e,r){var a=r("c6b6"),n=r("9263");t.exports=function(t,e){var r=t.exec;if("function"===typeof r){var i=r.call(t,e);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==a(t))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"159b":function(t,e,r){var a=r("da84"),n=r("fdbc"),i=r("17c2"),o=r("9112");for(var s in n){var c=a[s],l=c&&c.prototype;if(l&&l.forEach!==i)try{o(l,"forEach",i)}catch(u){l.forEach=i}}},"17c2":function(t,e,r){"use strict";var a=r("b727").forEach,n=r("a640"),i=r("ae40"),o=n("forEach"),s=i("forEach");t.exports=o&&s?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},"1da1":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("d3b7");function a(t,e,r,a,n,i,o){try{var s=t[i](o),c=s.value}catch(l){return void r(l)}s.done?e(c):Promise.resolve(c).then(a,n)}function n(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){a(o,n,i,s,c,"next",t)}function c(t){a(o,n,i,s,c,"throw",t)}s(void 0)}))}}},2374:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("商品管理")]),r("el-breadcrumb-item",[t._v("商品列表")])],1),r("el-card",[r("el-row",[r("el-col",[r("el-input",{staticClass:"input-search",attrs:{placeholder:"请输入内容",clearable:""},on:{clear:t.getGoodsList},model:{value:t.queryInfo.query,callback:function(e){t.$set(t.queryInfo,"query",e)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getGoodsList},slot:"append"})],1),r("el-button",{attrs:{type:"primary"},on:{click:t.goAddPage}},[t._v("添加商品")])],1)],1),r("el-table",{staticClass:"goods-table",attrs:{data:t.goodsList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"#"}}),r("el-table-column",{attrs:{prop:"goods_name",label:"商品名称",width:"300px"}}),r("el-table-column",{attrs:{prop:"goods_price",label:"商品价格(元)",width:"80px"}}),r("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量",width:"80px"}}),r("el-table-column",{attrs:{prop:"add_time",label:"创建时间",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatDate")(e.row.add_time))+" ")]}}])}),r("el-table-column",{attrs:{label:"操作",width:"130px"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{staticClass:"el-icon-edit",attrs:{type:"primary",size:"mini"}}),r("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",size:"mini"},on:{click:function(r){return t.deleteGood(e.row.goods_id)}}})]}}])})],1),r("el-pagination",{attrs:{"current-page":t.queryInfo.pagenum,"page-sizes":[5,10,20,30],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:t.total,background:!0},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},n=[],i=(r("96cf"),r("1da1")),o={data:function(){return{goodsList:[],queryInfo:{query:"",pagenum:1,pagesize:5},total:0}},created:function(){this.getGoodsList()},methods:{getGoodsList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("goods",{params:t.queryInfo});case 2:if(r=e.sent,a=r.data,200===a.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取商品列表数据失败"));case 6:t.$message.success("获取商品列表数据成功！"),t.goodsList=a.data.goods,t.total=a.data.total;case 9:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.queryInfo.pagesize=t,this.getGoodsList()},handleCurrentChange:function(t){this.queryInfo.pagenum=t,this.getGoodsList()},deleteGood:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t}));case 2:if(a=r.sent,"confirm"===a){r.next=5;break}return r.abrupt("return",e.$message.info("已取消了删除！"));case 5:return r.next=7,e.$http.delete("goods/"+t);case 7:if(n=r.sent,i=n.data,200===i.meta.status){r.next=11;break}return r.abrupt("return",e.$$message.error("删除商品失败！"));case 11:return e.getGoodsList(),r.abrupt("return",e.$message.success("删除商品成功！"));case 13:case"end":return r.stop()}}),r)})))()},goAddPage:function(){this.$router.push("/goods/add")}}},s=o,c=(r("81f0"),r("2877")),l=Object(c["a"])(s,a,n,!1,null,"1abef230",null);e["default"]=l.exports},"3b0d":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("商品管理")]),r("el-breadcrumb-item",[t._v("参数列表")])],1),r("el-card",[r("el-alert",{attrs:{closable:!1,title:"注意：只允许为第三级分类设置相关参数！",type:"warning","show-icon":""}}),r("el-row",{staticClass:"cat_opt"},[r("el-col",[r("span",[t._v("选择商品分类: ")]),r("el-cascader",{attrs:{options:t.cateList,props:t.cateCascaderProps},on:{change:t.cateCascaderChanged},model:{value:t.selectedKeys,callback:function(e){t.selectedKeys=e},expression:"selectedKeys"}})],1)],1),r("el-tabs",{on:{"tab-click":t.handleTabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[r("el-button",{attrs:{type:"primary",disabled:3!==t.selectedKeys.length,size:"mini"},on:{click:t.showAddParamsDialog}},[t._v("添加参数")]),r("el-table",{attrs:{data:t.manyTableData,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(a,n){return r("el-tag",{key:n,attrs:{closable:"","disable-transitions":!1},on:{close:function(r){return t.handleAttrTagClose(e.row,n)}}},[t._v(" "+t._s(a)+" ")])})),e.row.inputVisible?r("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(r){return t.handleAddAttrInputConfirm(e.row)}},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&t._k(r.keyCode,"enter",13,r.key,"Enter")?null:t.handleAddAttrInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(r){t.$set(e.row,"inputValue",r)},expression:"props.row.inputValue"}}):r("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(r){return t.showAddAttrInput(e.row)}}},[t._v("+ New Tag")])]}}])}),r("el-table-column",{attrs:{type:"index",label:"#"}}),r("el-table-column",{attrs:{prop:"attr_name",label:"参数名称"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{staticClass:"el-icon-edit",attrs:{type:"primary",size:"mini"},on:{click:function(r){return t.showEditDialog(e.row)}}},[t._v("编辑")]),r("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",size:"mini"},on:{click:function(r){return t.deleteParams(e.row.attr_id)}}},[t._v("删除")])]}}])})],1)],1),r("el-tab-pane",{attrs:{label:"静态属性",name:"only"}},[r("el-button",{attrs:{type:"primary",disabled:3!==t.selectedKeys.length,size:"mini"},on:{click:t.showAddParamsDialog}},[t._v("添加参数")]),r("el-table",{attrs:{data:t.onlyTableData,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(a,n){return r("el-tag",{key:n,attrs:{closable:"","disable-transitions":!1},on:{close:function(r){return t.handleAttrTagClose(e.row,n)}}},[t._v(" "+t._s(a)+" ")])})),e.row.inputVisible?r("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(r){return t.handleAddAttrInputConfirm(e.row)}},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&t._k(r.keyCode,"enter",13,r.key,"Enter")?null:t.handleAddAttrInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(r){t.$set(e.row,"inputValue",r)},expression:"props.row.inputValue"}}):r("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(r){return t.showAddAttrInput(e.row)}}},[t._v("+ New Tag")])]}}])}),r("el-table-column",{attrs:{type:"index",label:"#"}}),r("el-table-column",{attrs:{prop:"attr_name",label:"参数名称"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{staticClass:"el-icon-edit",attrs:{type:"primary",size:"mini"},on:{click:function(r){return t.showEditDialog(e.row)}}},[t._v("编辑")]),r("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",size:"mini"},on:{click:function(r){return t.deleteParams(e.row.attr_id)}}},[t._v("删除")])]}}])})],1)],1)],1)],1),r("el-dialog",{attrs:{title:"添加"+t.titleText,visible:t.addParamsDialogVisible,width:"50%"},on:{"update:visible":function(e){t.addParamsDialogVisible=e},close:t.addParamsDialogClosed}},[r("el-form",{ref:"addParamsFormRef",attrs:{model:t.addParamsForm,"label-width":"80px",rules:t.addParamsFormRules}},[r("el-form-item",{attrs:{label:t.titleText,prop:"attr_name"}},[r("el-input",{model:{value:t.addParamsForm.attr_name,callback:function(e){t.$set(t.addParamsForm,"attr_name",e)},expression:"addParamsForm.attr_name"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.addParamsDialogVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.addParams}},[t._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"修改"+t.titleText,visible:t.editParamsDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editParamsDialogVisible=e},close:t.editParamsDialogClosed}},[r("el-form",{ref:"editParamsFormRef",attrs:{model:t.editParamsForm,"label-width":"80px",rules:t.editParamsFormRules}},[r("el-form-item",{attrs:{label:t.titleText,prop:"attr_name"}},[r("el-input",{model:{value:t.editParamsForm.attr_name,callback:function(e){t.$set(t.editParamsForm,"attr_name",e)},expression:"editParamsForm.attr_name"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.editParamsDialogVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.editParams}},[t._v("确 定")])],1)],1)],1)},n=[],i=(r("99af"),r("4160"),r("a15b"),r("a434"),r("ac1f"),r("1276"),r("498a"),r("159b"),r("96cf"),r("1da1")),o={data:function(){return{value:"",cateList:[],cateCascaderProps:{value:"cat_id",label:"cat_name",children:"children",expandTrigger:"hover"},selectedKeys:[],manyTableData:[],onlyTableData:[],activeName:"many",addAttrInputVisible:!1,addAttrInputValue:"",addParamsDialogVisible:!1,editParamsDialogVisible:!1,addParamsForm:{attr_id:0,attr_name:""},editParamsForm:{attr_name:""},addParamsFormRules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}]},editParamsFormRules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}]}}},computed:{cateId:function(){return 3===this.selectedKeys.length?this.selectedKeys[2]:null},titleText:function(){return"many"===this.activeName?"动态参数":"静态属性"}},created:function(){this.getCateList()},methods:{cateCascaderChanged:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getParamsList();case 1:case"end":return e.stop()}}),e)})))()},getCateList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories",{type:3});case 2:if(r=e.sent,a=r.data,200===a.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取商品列表失败!"));case 6:t.$message.success("获取商品列表成功!"),t.cateList=a.data;case 8:case"end":return e.stop()}}),e)})))()},getParamsList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(3===t.selectedKeys.length){e.next=5;break}return t.selectedKeys=[],t.manyTableData=[],t.onlyTableData=[],e.abrupt("return");case 5:return e.next=7,t.$http.get("categories/".concat(t.cateId,"/attributes"),{params:{sel:t.activeName}});case 7:if(r=e.sent,a=r.data,200===a.meta.status){e.next=11;break}return e.abrupt("return",t.$message.error("获取参数列表失败!"));case 11:t.$message.success("获取参数列表成功!"),a.data.forEach((function(t,e){t.attr_vals=t.attr_vals.trim().length?t.attr_vals.split(","):[],t.inputVisible=!1,t.inputValue=""})),"many"===t.activeName?t.manyTableData=a.data:"only"===t.activeName&&(t.onlyTableData=a.data);case 14:case"end":return e.stop()}}),e)})))()},handleTabClick:function(){this.getParamsList()},setAttr_vals:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$http.put("categories/".concat(e.cateId,"/attributes/").concat(t.attr_id),{attr_name:t.attr_name,attr_sel:e.activeName,attr_vals:t.attr_vals.join(",")});case 2:if(a=r.sent,n=a.data,200===n.meta.status){r.next=6;break}return r.abrupt("return",e.$message.error("更新参数属性失败"));case 6:e.$message.success("更新参数属性成功!");case 7:case"end":return r.stop()}}),r)})))()},handleAttrTagClose:function(t,e){t.attr_vals.splice(e,1),this.setAttr_vals(t)},showAddAttrInput:function(t){var e=this;t.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleAddAttrInputConfirm:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=t.inputValue,a.trim().length&&(t.attr_vals.push(a),e.setAttr_vals(t)),t.inputVisible=!1,t.inputValue="";case 4:case"end":return r.stop()}}),r)})))()},showAddParamsDialog:function(){this.addParamsDialogVisible=!0},addParamsDialogClosed:function(){this.$refs.addParamsFormRef.resetFields(),this.addParamsForm.attr_name=""},addParams:function(){var t=this;this.$refs.addParamsFormRef.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.post("categories/".concat(t.cateId,"/attributes"),{attr_name:t.addParamsForm.attr_name,attr_sel:t.activeName,attr_vals:""});case 4:if(a=e.sent,n=a.data,201===n.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("添加参数失败!"));case 8:t.$message.success("添加参数成功!"),t.addParamsForm.attr_name="",t.addParamsDialogVisible=!1,t.getParamsList();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},showEditDialog:function(t){this.editParamsForm.attr_id=t.attr_id,this.editParamsForm.attr_name=t.attr_name,this.editParamsDialogVisible=!0},editParamsDialogClosed:function(){this.$refs.editParamsFormRef.resetFields(),this.editParamsForm.attr_name="",this.editParamsForm.attr_id=0},editParams:function(){var t=this;this.$refs.editParamsFormRef.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.put("categories/".concat(t.cateId,"/attributes/").concat(t.editParamsForm.attr_id),{attr_name:t.editParamsForm.attr_name,attr_sel:t.activeName});case 4:if(a=e.sent,n=a.data,200===n.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("更新参数失败!"));case 8:t.$message.success("更新参数成功!"),t.editParamsDialogVisible=!1,t.getParamsList();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},deleteParams:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$confirm("此操作将永久删除该参数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t}));case 2:if(a=r.sent,"confirm"===a){r.next=5;break}return r.abrupt("return",e.$message.info("已取消删除!"));case 5:return r.next=7,e.$http.delete("categories/".concat(e.cateId,"/attributes/").concat(t));case 7:if(n=r.sent,i=n.data,200===i.meta.status){r.next=11;break}return r.abrupt("return",e.$message.error("删除参数失败!"));case 11:e.$message.success("删除参数成功!"),e.getParamsList();case 13:case"end":return r.stop()}}),r)})))()}}},s=o,c=(r("ea93"),r("2877")),l=Object(c["a"])(s,a,n,!1,null,"324ad030",null);e["default"]=l.exports},4160:function(t,e,r){"use strict";var a=r("23e7"),n=r("17c2");a({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},4207:function(t,e,r){"use strict";r("c3d9")},"44e7":function(t,e,r){var a=r("861d"),n=r("c6b6"),i=r("b622"),o=i("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==n(t))}},"498a":function(t,e,r){"use strict";var a=r("23e7"),n=r("58a8").trim,i=r("c8d2");a({target:"String",proto:!0,forced:i("trim")},{trim:function(){return n(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var a=r("1d80"),n=r("5899"),i="["+n+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),c=function(t){return function(e){var r=String(a(e));return 1&t&&(r=r.replace(o,"")),2&t&&(r=r.replace(s,"")),r}};t.exports={start:c(1),end:c(2),trim:c(3)}},6547:function(t,e,r){var a=r("a691"),n=r("1d80"),i=function(t){return function(e,r){var i,o,s=String(n(e)),c=a(r),l=s.length;return c<0||c>=l?t?"":void 0:(i=s.charCodeAt(c),i<55296||i>56319||c+1===l||(o=s.charCodeAt(c+1))<56320||o>57343?t?s.charAt(c):i:t?s.slice(c,c+2):o-56320+(i-55296<<10)+65536)}};t.exports={codeAt:i(!1),charAt:i(!0)}},"7f6a":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("商品管理")]),r("el-breadcrumb-item",[t._v("商品分类")])],1),r("el-card",[r("el-row",[r("el-col",[r("el-button",{attrs:{type:"primary"},on:{click:t.showAddCateDialog}},[t._v("添加分类")])],1)],1),r("tree-table",{attrs:{data:t.goodsList,columns:t.colunms,border:"","selection-type":!1,"expand-type":!1,"show-index":!0,"index-text":"#","show-row-hover":!0},scopedSlots:t._u([{key:"cat_deleted",fn:function(e){return[e.row.cat_deleted?t._e():r("i",{staticClass:"el-icon-success",staticStyle:{color:"lightgreen"}}),e.row.cat_deleted?r("i",{staticClass:"el-icon-error",staticStyle:{color:"lightgreen"}}):t._e()]}},{key:"cat_level",fn:function(e){return[0===e.row.cat_level?r("el-tag",{attrs:{type:"primary"}},[t._v("一级")]):t._e(),1===e.row.cat_level?r("el-tag",{attrs:{type:"success"}},[t._v("二级")]):t._e(),2===e.row.cat_level?r("el-tag",{attrs:{type:"warning"}},[t._v("三级")]):t._e()]}},{key:"operation",fn:function(){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}},[t._v("编辑")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-setting",size:"mini"}},[t._v("删除")])]},proxy:!0}])}),r("el-pagination",{attrs:{"current-page":t.queryInfo.pagenum,"page-sizes":[5,10,15,20],"page-size":t.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),r("el-dialog",{attrs:{title:"添加分类",visible:t.addCateDialogVisible,width:"50%"},on:{"update:visible":function(e){t.addCateDialogVisible=e},close:t.addCateDialogClosed}},[r("el-form",{ref:"addCateFormRef",attrs:{model:t.addCateForm,rules:t.addCateFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[r("el-input",{model:{value:t.addCateForm.cat_name,callback:function(e){t.$set(t.addCateForm,"cat_name",e)},expression:"addCateForm.cat_name"}})],1),r("el-form-item",{attrs:{label:"父级分类"}},[r("el-cascader",{attrs:{options:t.parentCateList,clearable:"",props:t.cascaderProps},on:{change:t.parentCateChanged},model:{value:t.selectedKeys,callback:function(e){t.selectedKeys=e},expression:"selectedKeys"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.addCateDialogVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.addCate}},[t._v("确 定")])],1)],1)],1)],1)},n=[],i=(r("96cf"),r("1da1")),o={data:function(){return{goodsList:[],queryInfo:{type:3,pagesize:5,pagenum:1},total:0,colunms:[{label:"分类名称",prop:"cat_name",width:"200px"},{label:"是否有效",type:"template",template:"cat_deleted"},{label:"排序",type:"template",template:"cat_level"},{label:"操作",type:"template",template:"operation",width:"200px"}],addCateDialogVisible:!1,addCateForm:{cat_pid:0,cat_name:"",cat_level:0},addCateFormRules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},parentCateList:[],cascaderProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",checkStrictly:!0},selectedKeys:[]}},created:function(){this.getGoodsList()},methods:{getGoodsList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories",{params:t.queryInfo});case 2:if(r=e.sent,a=r.data,200===a.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取商品列表失败"));case 6:t.$message.success("获取商品列表成功"),t.goodsList=a.data.result,t.total=a.data.total;case 9:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.queryInfo.pagesize=t,this.getGoodsList()},handleCurrentChange:function(t){this.queryInfo.pagenum=t,this.getGoodsList()},showAddCateDialog:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories",{params:{type:2}});case 2:if(r=e.sent,a=r.data,200===a.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取父级分类失败"));case 6:t.parentCateList=a.data,t.addCateDialogVisible=!0,t.$message.success("获取父级分类成功");case 9:case"end":return e.stop()}}),e)})))()},parentCateChanged:function(){switch(this.selectedKeys.length){case 0:this.addCateForm.cat_pid=0,this.addCateForm.cat_level=0;break;case 1:this.addCateForm.cat_pid=this.selectedKeys[0],this.addCateForm.cat_level=1;break;case 2:this.addCateForm.cat_pid=this.selectedKeys[1],this.addCateForm.cat_level=2;break}},addCate:function(){var t=this;this.$refs.addCateFormRef.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.post("categories",t.addCateForm);case 4:if(a=e.sent,n=a.data,201===n.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("添加分类失败"));case 8:t.$message.success("添加表单成功"),t.addCateForm.cat_pid=0,t.addCateForm.cat_name="",t.addCateForm.cat_level=0,t.selectedKeys=[],t.addCateDialogVisible=!1,t.getGoodsList();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},addCateDialogClosed:function(){this.$refs.addCateFormRef.resetFields(),this.selectedKeys=[],this.addCateForm.cat_level=0,this.addCateForm.cat_pid=0}}},s=o,c=(r("4207"),r("2877")),l=Object(c["a"])(s,a,n,!1,null,"7a35858f",null);e["default"]=l.exports},"81f0":function(t,e,r){"use strict";r("06fc")},"8aa5":function(t,e,r){"use strict";var a=r("6547").charAt;t.exports=function(t,e,r){return e+(r?a(t,e).length:1)}},9263:function(t,e,r){"use strict";var a=r("ad6d"),n=r("9f7f"),i=RegExp.prototype.exec,o=String.prototype.replace,s=i,c=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=n.UNSUPPORTED_Y||n.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=c||u||l;d&&(s=function(t){var e,r,n,s,d=this,p=l&&d.sticky,m=a.call(d),f=d.source,h=0,g=t;return p&&(m=m.replace("y",""),-1===m.indexOf("g")&&(m+="g"),g=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(f="(?: "+f+")",g=" "+g,h++),r=new RegExp("^(?:"+f+")",m)),u&&(r=new RegExp("^"+f+"$(?!\\s)",m)),c&&(e=d.lastIndex),n=i.call(p?r:d,g),p?n?(n.input=n.input.slice(h),n[0]=n[0].slice(h),n.index=d.lastIndex,d.lastIndex+=n[0].length):d.lastIndex=0:c&&n&&(d.lastIndex=d.global?n.index+n[0].length:e),u&&n&&n.length>1&&o.call(n[0],r,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(n[s]=void 0)})),n}),t.exports=s},"96cf":function(t,e,r){var a=function(t){"use strict";var e,r=Object.prototype,a=r.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(T){c=function(t,e,r){return t[e]=r}}function l(t,e,r,a){var n=e&&e.prototype instanceof g?e:g,i=Object.create(n.prototype),o=new R(a||[]);return i._invoke=F(t,r,o),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(T){return{type:"throw",arg:T}}}t.wrap=l;var d="suspendedStart",p="suspendedYield",m="executing",f="completed",h={};function g(){}function b(){}function v(){}var y={};y[i]=function(){return this};var _=Object.getPrototypeOf,x=_&&_(_(E([])));x&&x!==r&&a.call(x,i)&&(y=x);var w=v.prototype=g.prototype=Object.create(y);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function r(n,i,o,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"===typeof d&&a.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(d).then((function(t){l.value=t,o(l)}),(function(t){return r("throw",t,o,s)}))}s(c.arg)}var n;function i(t,a){function i(){return new e((function(e,n){r(t,a,e,n)}))}return n=n?n.then(i,i):i()}this._invoke=i}function F(t,e,r){var a=d;return function(n,i){if(a===m)throw new Error("Generator is already running");if(a===f){if("throw"===n)throw i;return I()}r.method=n,r.arg=i;while(1){var o=r.delegate;if(o){var s=L(o,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=m;var c=u(t,e,r);if("normal"===c.type){if(a=r.done?f:p,c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=f,r.method="throw",r.arg=c.arg)}}}function L(t,r){var a=t.iterator[r.method];if(a===e){if(r.delegate=null,"throw"===r.method){if(t.iterator["return"]&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method))return h;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=u(a,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,h;var i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function $(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function E(t){if(t){var r=t[i];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function r(){while(++n<t.length)if(a.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}return{next:I}}function I(){return{value:e,done:!0}}return b.prototype=w.constructor=v,v.constructor=b,b.displayName=c(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},k(C.prototype),C.prototype[o]=function(){return this},t.AsyncIterator=C,t.async=function(e,r,a,n,i){void 0===i&&(i=Promise);var o=new C(l(e,r,a,n),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(w),c(w,s,"Generator"),w[i]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var a=e.pop();if(a in t)return r.value=a,r.done=!1,r}return r.done=!0,r}},t.values=E,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach($),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(a,n){return s.type="throw",s.arg=t,r.next=a,n&&(r.method="next",r.arg=e),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),$(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var a=r.completion;if("throw"===a.type){var n=a.arg;$(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,a){return this.delegate={iterator:E(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=e),h}},t}(t.exports);try{regeneratorRuntime=a}catch(n){Function("r","regeneratorRuntime = r")(a)}},"9f7f":function(t,e,r){"use strict";var a=r("d039");function n(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=a((function(){var t=n("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=a((function(){var t=n("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a017:function(t,e,r){},a15b:function(t,e,r){"use strict";var a=r("23e7"),n=r("44ad"),i=r("fc6a"),o=r("a640"),s=[].join,c=n!=Object,l=o("join",",");a({target:"Array",proto:!0,forced:c||!l},{join:function(t){return s.call(i(this),void 0===t?",":t)}})},a434:function(t,e,r){"use strict";var a=r("23e7"),n=r("23cb"),i=r("a691"),o=r("50c4"),s=r("7b0b"),c=r("65f0"),l=r("8418"),u=r("1dde"),d=r("ae40"),p=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!p||!m},{splice:function(t,e){var r,a,u,d,p,m,v=s(this),y=o(v.length),_=n(t,y),x=arguments.length;if(0===x?r=a=0:1===x?(r=0,a=y-_):(r=x-2,a=h(f(i(e),0),y-_)),y+r-a>g)throw TypeError(b);for(u=c(v,a),d=0;d<a;d++)p=_+d,p in v&&l(u,d,v[p]);if(u.length=a,r<a){for(d=_;d<y-a;d++)p=d+a,m=d+r,p in v?v[m]=v[p]:delete v[m];for(d=y;d>y-a+r;d--)delete v[d-1]}else if(r>a)for(d=y-a;d>_;d--)p=d+a-1,m=d+r-1,p in v?v[m]=v[p]:delete v[m];for(d=0;d<r;d++)v[d+_]=arguments[d+2];return v.length=y-a+r,u}})},a640:function(t,e,r){"use strict";var a=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&a((function(){r.call(null,e||function(){throw 1},1)}))}},ab20:function(t,e,r){},ac1f:function(t,e,r){"use strict";var a=r("23e7"),n=r("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},ad6d:function(t,e,r){"use strict";var a=r("825a");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},c04e3:function(t,e,r){"use strict";r("ab20")},c3d9:function(t,e,r){},c740:function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").findIndex,i=r("44d2"),o=r("ae40"),s="findIndex",c=!0,l=o(s);s in[]&&Array(1)[s]((function(){c=!1})),a({target:"Array",proto:!0,forced:c||!l},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i(s)},c8d2:function(t,e,r){var a=r("d039"),n=r("5899"),i="​᠎";t.exports=function(t){return a((function(){return!!n[t]()||i[t]()!=i||n[t].name!==t}))}},d784:function(t,e,r){"use strict";r("ac1f");var a=r("6eeb"),n=r("d039"),i=r("b622"),o=r("9263"),s=r("9112"),c=i("species"),l=!n((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=i("replace"),p=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),m=!n((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));t.exports=function(t,e,r,d){var f=i(t),h=!n((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),g=h&&!n((function(){var e=!1,r=/a/;return"split"===t&&(r={},r.constructor={},r.constructor[c]=function(){return r},r.flags="",r[f]=/./[f]),r.exec=function(){return e=!0,null},r[f](""),!e}));if(!h||!g||"replace"===t&&(!l||!u||p)||"split"===t&&!m){var b=/./[f],v=r(f,""[t],(function(t,e,r,a,n){return e.exec===o?h&&!n?{done:!0,value:b.call(e,r,a)}:{done:!0,value:t.call(r,e,a)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),y=v[0],_=v[1];a(String.prototype,t,y),a(RegExp.prototype,f,2==e?function(t,e){return _.call(t,this,e)}:function(t){return _.call(t,this)})}d&&s(RegExp.prototype[f],"sham",!0)}},db60:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("商品管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/goods"}}},[t._v("商品列表")]),r("el-breadcrumb-item",[t._v("添加商品")])],1),r("el-card",[r("el-alert",{attrs:{title:"添加商品信息",type:"info","show-icon":"",center:"",closable:!1}}),r("el-steps",{attrs:{space:200,active:t.activeIndex-0,"finish-status":"success","align-center":""}},[r("el-step",{attrs:{title:"基本信息"}}),r("el-step",{attrs:{title:"商品参数"}}),r("el-step",{attrs:{title:"商品属性"}}),r("el-step",{attrs:{title:"商品图片"}}),r("el-step",{attrs:{title:"商品内容"}}),r("el-step",{attrs:{title:"完成"}})],1),r("el-form",{ref:"addFormRef",attrs:{model:t.addForm,rules:t.addFormRules,"label-width":"80px","label-position":"top"}},[r("el-tabs",{attrs:{"tab-position":"left","before-leave":t.beforeTabLeave},on:{"tab-click":t.tabClicked},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[r("el-tab-pane",{attrs:{name:"0",label:"基本信息"}},[r("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[r("el-input",{model:{value:t.addForm.goods_name,callback:function(e){t.$set(t.addForm,"goods_name",e)},expression:"addForm.goods_name"}})],1),r("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[r("el-input",{attrs:{type:"number"},model:{value:t.addForm.goods_price,callback:function(e){t.$set(t.addForm,"goods_price",e)},expression:"addForm.goods_price"}})],1),r("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[r("el-input",{attrs:{type:"number"},model:{value:t.addForm.goods_weight,callback:function(e){t.$set(t.addForm,"goods_weight",e)},expression:"addForm.goods_weight"}})],1),r("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[r("el-input",{attrs:{type:"number"},model:{value:t.addForm.goods_number,callback:function(e){t.$set(t.addForm,"goods_number",e)},expression:"addForm.goods_number"}})],1),r("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[r("el-cascader",{attrs:{options:t.cateList,props:t.cateCascaderProps,clearable:""},on:{change:t.cateChanged},model:{value:t.addForm.goods_cat,callback:function(e){t.$set(t.addForm,"goods_cat",e)},expression:"addForm.goods_cat"}})],1)],1),r("el-tab-pane",{attrs:{name:"1",label:"商品参数"}},t._l(t.manyTableData,(function(e){return r("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[r("el-checkbox-group",{model:{value:e.attr_vals,callback:function(r){t.$set(e,"attr_vals",r)},expression:"item.attr_vals"}},t._l(e.attr_vals,(function(t,e){return r("el-checkbox",{key:e,attrs:{label:t,border:""}})})),1)],1)})),1),r("el-tab-pane",{attrs:{name:"2",label:"商品属性"}},t._l(t.onlyTableData,(function(e){return r("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[r("el-input",{model:{value:e.attr_vals,callback:function(r){t.$set(e,"attr_vals",r)},expression:"item.attr_vals"}})],1)})),1),r("el-tab-pane",{attrs:{name:"3",label:"商品图片"}},[r("el-upload",{staticClass:"upload-demo",attrs:{action:t.actionUrl,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"list-type":"picture",headers:t.headersObj,"on-success":t.picUploaded}},[r("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),r("el-tab-pane",{attrs:{name:"4",label:"商品内容"}},[r("quill-editor",{model:{value:t.addForm.goods_introduce,callback:function(e){t.$set(t.addForm,"goods_introduce",e)},expression:"addForm.goods_introduce"}}),r("el-button",{staticClass:"btnAdd",attrs:{type:"primary"},on:{click:t.addGoods}},[t._v("添加商品")])],1)],1)],1)],1),r("el-dialog",{attrs:{title:"预览图片",visible:t.previewDialogVisible,width:"50%"},on:{"update:visible":function(e){t.previewDialogVisible=e}}},[r("img",{attrs:{src:t.previewPath,alt:""}})])],1)},n=[],i=(r("c740"),r("4160"),r("a15b"),r("a434"),r("ac1f"),r("1276"),r("498a"),r("159b"),r("96cf"),r("1da1")),o=r("60bb"),s=r.n(o),c={data:function(){return{activeIndex:"0",addForm:{goods_name:"",goods_price:0,goods_number:0,goods_weight:0,goods_cat:[],pics:[],goods_introduce:"",attrs:[]},addFormRules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],goods_cat:[{required:!0,message:"请选择商品分类",trigger:"blur"}]},cateList:[],cateCascaderProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"},manyTableData:[],onlyTableData:[],actionUrl:"http://www.ysqorz.top:8888/api/private/v1/upload",headersObj:{Authorization:window.sessionStorage.getItem("token")},previewPath:"",previewDialogVisible:!1}},computed:{cateId:function(){return 3===this.addForm.goods_cat.length?this.addForm.goods_cat[2]:null}},created:function(){this.getCateList()},methods:{getCateList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories");case 2:if(r=e.sent,a=r.data,200===a.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取商品分类列表失败!"));case 6:t.$message.success("获取商品分类列表成功!"),t.cateList=a.data;case 8:case"end":return e.stop()}}),e)})))()},cateChanged:function(){3!==this.addForm.goods_cat.length&&(this.addForm.goods_cat=[])},beforeTabLeave:function(t,e){if("0"===e&&3!==this.addForm.goods_cat.length)return this.$message.error("请选择商品分类"),!1},tabClicked:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("1"!==t.activeIndex){e.next=12;break}return e.next=3,t.$http.get("categories/".concat(t.cateId,"/attributes"),{params:{sel:"many"}});case 3:if(r=e.sent,a=r.data,200===a.meta.status){e.next=7;break}return e.abrupt("return",t.$message.error("获取商品参数失败!"));case 7:a.data.forEach((function(t){t.attr_vals=0===t.attr_vals.trim().length?[]:t.attr_vals.split(",")})),t.manyTableData=a.data,t.$message.success("获取商品参数成功!"),e.next=20;break;case 12:if("2"!==t.activeIndex){e.next=20;break}return e.next=15,t.$http.get("categories/".concat(t.cateId,"/attributes"),{params:{sel:"only"}});case 15:if(n=e.sent,i=n.data,200===i.meta.status){e.next=19;break}return e.abrupt("return",t.$message.error("获取商品参数失败!"));case 19:t.onlyTableData=i.data;case 20:case"end":return e.stop()}}),e)})))()},picUploaded:function(t){var e={pic:t.data.tmp_path};this.addForm.pics.push(e)},handlePreview:function(t){var e=t.response.data.url;this.previewPath=e,this.previewDialogVisible=!0},handleRemove:function(t){var e=t.response.data.tmp_path,r=this.addForm.pics.findIndex((function(t){return t.pic===e}));this.addForm.pics.splice(r,1)},addGoods:function(){var t=this;this.$refs.addFormRef.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",t.$message.error("请填写必要的表单项"));case 2:return a=s.a.cloneDeep(t.addForm),a.goods_cat=a.goods_cat.join(","),t.manyTableData.forEach((function(t){var e={attr_id:t.attr_id,attr_value:t.attr_vals.join(",")};a.attrs.push(e)})),t.onlyTableData.forEach((function(t){var e={attr_id:t.attr_id,attr_vals:t.attr_vals};a.attrs.push(e)})),e.next=8,t.$http.post("goods",a);case 8:if(n=e.sent,i=n.data,201===i.meta.status){e.next=12;break}return e.abrupt("return",t.$message.error("添加商品失败!"));case 12:t.$message.success("添加商品成功!"),t.$router.push("/goods");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},l=c,u=(r("c04e3"),r("2877")),d=Object(u["a"])(l,a,n,!1,null,"1f43ada1",null);e["default"]=d.exports},ea93:function(t,e,r){"use strict";r("a017")},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=cate_params_goods_addpage.aa1b0f58.js.map